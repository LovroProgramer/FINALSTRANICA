import cryptography
import socket
from cryptography.fernet import Fernet


key = Fernet.generate_key()
f = Fernet(key)


sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
sock.connect(('localhost',6000))
sock.send(key)
while(1):
    pozdrav = input("Unesi poruku: ")
    podaci = f.encrypt(pozdrav.encode())

    sock.send(podaci)
    primljeni_podaci = sock.recv(1024)
    primljeni_pozdrav = f.decrypt(primljeni_podaci).decode()
    print(primljeni_pozdrav)
    if pozdrav=='q':
        break
sock.close()